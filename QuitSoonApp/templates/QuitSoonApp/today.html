{% extends 'QuitSoonApp/base.html' %}
{% load static %}
{% block content %}

<!-- Main content -->

<!-- Page heading -->
<div class="page-heading">
  <i class="fas fa-calendar-day"></i>
  <h1>Today</h1>
  <h2>À chaque jour suffit sa peine, et aujourd'hui?</h2>
</div>
<!-- End page heading -->

<!-- Panel content -->
<main id="today" class="content">
  <section class="panel p1 pc-0 panel-big-btn">
    <a class="big-btn-container" href="{% url 'QuitSoonApp:health' %}">
      <div class="btn-success big-btn">
        <i class="fas fa-heart"></i>
        <div class="tablet-content">
          <span class="tablet-content">Je me fais</span>
          <span class="tablet-content">du bien</span>
        </div>
      </div>
      <span class="mobile-content success-label">Je me fais</span>
      <span class="mobile-content success-label">du bien</span>
    </a>
  </section>
  <section class="panel p2 pc-0 panel-big-btn">
    <a class="big-btn-container" href="{% url 'QuitSoonApp:smoke' %}">
      <div class="btn-error big-btn">
        <i class="fas fa-skull"></i>
        <div class="tablet-content">
          <span class="tablet-content">Je me fais</span>
          <span class="tablet-content">du mal</span>
        </div>
      </div>
      <span class="mobile-content error-label">Je me fais</span>
      <span class="mobile-content error-label">du mal</span>
    </a>
  </section>

  {% if profile %}

    <section class="panel p3">
        {% if lastsmoke %}
          <p><b>Dernière cigarette il y a
            {% for element in lastsmoke %}
                  {{ element }}
            {% endfor %}</b></p>
          <p><b>Consommation : {{ smoke_today }}</b></p>
          <p><b>Moyenne / jour : {{ average_number }}</b></p>
          <a class="btn" href="{% url 'QuitSoonApp:smoke_list' %}">Voir mes craquages</a>
        {% else %}
          Aucune cigarette fumée enregistrée
        {% endif %}
    </section>
    <section class="panel p4">
        {% if lasthealth %}
          <p><b>Dernière alternative il y a
            {% for element in lasthealth %}
                  {{ element }}
            {% endfor %}</b></p>

          <p><b>
            {% for type, values in activity_stats.items %}
              {% if values.exists %}
                {{ values.name }}:
                {% if values.day %}
                  {{ values.day }} aujourd'hui,
                {% endif %}
                {% if values.week %}
                  {{ values.week }} cette semaine,
                {% endif %}
                {% if values.month %}
                  {{ values.month }} ce mois-ci,
                {% else %}
                  Aucune activité ce mois-ci
                {% endif %}
              {% endif %}
            {% endfor %}
          </b></p>

          <p><b>Substituts : </b></p>
          <p><b>
            {% for type, values in substitut_stats.items %}
              {% if values.exists %}
                {{ values.name }}:
                {% if values.day %}
                  {{ values.day }} aujourd'hui,
                {% endif %}
                {% if values.week %}
                  {{ values.week }} cette semaine,
                {% endif %}
                {% if values.month %}
                  {{ values.month }} ce mois-ci,
                {% else %}
                  Aucune consommation de substitut enregistrée ce mois-ci
                {% endif %}
              {% endif %}
            {% endfor %}
          </b></p>
          <a class="btn" href="{% url 'QuitSoonApp:health_list' %}">Voir actions saines</a>
        {% else %}
          Aucune action saine enregistrée
        {% endif %}
    </section>

  {% else %}

  <section class="panel p3">
    Vous n'avez pas paramétré votre profil, nous ne pouvons donc pas fournir de statiqtiques.
    <a class="btn-secondary" href="{% url 'QuitSoonApp:profile' %}">Paramétrer mon profil</a>
  </section>

  {% endif %}

</main>
<!-- End panel content -->

<!-- Page modals -->
<div id="today-modals" class="modal-container page-modals"></div>

<!-- End page modals -->
<!-- End of main content -->
{% endblock %}
