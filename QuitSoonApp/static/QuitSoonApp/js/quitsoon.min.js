/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(a){"use strict";a("#sidebarToggle, #sidebarToggleTop").on("click",function(e){a("body").toggleClass("sidebar-toggled"),a(".sidebar").toggleClass("toggled"),a(".sidebar").hasClass("toggled")&&a(".sidebar .collapse").collapse("hide")}),a(window).resize(function(){a(window).width()<768&&a(".sidebar .collapse").collapse("hide")}),a("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){if(768<a(window).width()){var s=e.originalEvent,i=s.wheelDelta||-s.detail;this.scrollTop+=30*(i<0?1:-1),e.preventDefault()}}),a(document).on("scroll",function(){100<a(this).scrollTop()?a(".scroll-to-top").fadeIn():a(".scroll-to-top").fadeOut()}),a(document).on("click","a.scroll-to-top",function(e){var s=a(this);a("html, body").stop().animate({scrollTop:a(s.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()}),a(".pass-status").on("click",function(e){var s=a(".password-field"),i=a(".pass-status");"password"==s.prop("type")?(s.prop("type","text"),i.toggleClass("fa-eye fa-eye-slash")):(s.prop("type","password"),i.toggleClass("fa-eye-slash fa-eye"))}),a(".form-with-password").on("submit",function(e){return a(".password-field").prop("type","password"),!0}),a("#NewNameForm").on("submit",function(e){a(this);var i=a(this).find("input[type=submit]");a(".username-error").css("display","none"),a(".newname-error").css("display","none"),e.preventDefault(),a.ajax({url:"/new_name/",type:"POST",data:a(this).serialize()}).done(function(e){var s=jQuery.parseJSON(e);"success"==s.response?(document.location.reload(!0),a("#modal_change_username").modal("hide")):("name already in db"==s.response?a(".username-error").css("display","block"):a(".newname-error").css("display","block"),i.prop("disabled",!1))})}),a("#NewEmailForm").on("submit",function(e){a(this);var i=a(this).find("input[type=submit]");a(".newemail-error").css("display","none"),a(".dbemail-error").css("display","none"),e.preventDefault(),a.ajax({url:"/new_email/",type:"POST",data:a(this).serialize()}).done(function(e){var s=jQuery.parseJSON(e);"success"==s.response?(document.location.reload(!0),a("#modal_change_email").modal("hide")):("email already in DB"==s.response?a(".dbemail-error").css("display","block"):a(".newemail-error").css("display","block"),i.prop("disabled",!1))})}),a("#NewPasswordForm").on("submit",function(e){a(this);var i=a(this).find("input[type=submit]");a(".oldpwd-error").css("display","none"),a(".newpwd-error").css("display","none"),a(".dbpwd-error").css("display","none"),a(".newpassword-error").css("display","none"),e.preventDefault(),a.ajax({url:"/new_password/",type:"POST",data:a(this).serialize()}).done(function(e){var s=jQuery.parseJSON(e);"success"==s.response?(document.location.reload(!0),a("#modal_change_password").modal("hide")):("incorrect old password"==s.response?a(".oldpwd-error").css("display","block"):"new password not confirmed"==s.response?a(".dbpwd-error").css("display","block"):"incorrect newpassword"==s.response?a(".newpwd-error").css("display","block"):a(".newpassword-error").css("display","block"),i.prop("disabled",!1))})}),a("#noprofile").length&&a("#modal_starting_parameters").modal("show"),a("#NewParametersForm").on("submit",function(e){a("#choose_existing_pack").hasClass("active")?(a("#id_type_cig").val(""),a("#id_brand").val(""),a("#id_qt_paquet").val(""),a("#id_price").val("")):a("#create_pack_choice").hasClass("active")&&a("#id_ref_pack").val(""),document.location.reload(!0)}),newparameterspackform(),a(".nav li").on("click",function(){a(".nav li").removeClass("active"),a(this).addClass("active"),newparameterspackform()}),a(".fa-smoking").on("click",function(){a("#id_type_cig").prop("required",!0).removeClass("hide").addClass("show")}),a(".cig-change").on("click",function(e){"submit"==a(this).attr("id")?(a(this).siblings(".form-cig-change").find("input[type=number]").attr("type","hidden"),a(this).siblings(".form-cig-change").submit()):(e.preventDefault(),a(".cig-change").prev().removeClass("hide").addClass("show"),a(".cig-change").siblings(".form-cig-change").removeClass("show").addClass("hide"),a(".cig-change").removeAttr("id","submit"),a(this).prev().removeClass("show").addClass("hide"),a(this).siblings(".form-cig-change").removeClass("hide").addClass("show"),a(this).attr("id","submit"))}),a("#id_substitut").prop("required",!1),a("#id_nicotine").prop("required",!1),a("#id_type_activity").prop("required",!0),a("#id_activity").prop("required",!0),a(".activity_form").removeClass("hide").addClass("show"),a(".substitut_form").removeClass("show").addClass("hide"),a("#id_type_alternative").on("change",function(e){"Su"==a(this).val()?(a("#id_type_activity").prop("required",!1).val(""),a("#id_activity").prop("required",!1).val(""),a("#id_substitut").prop("required",!0),a("#id_nicotine").prop("required",!0),a(".activity_form").removeClass("show").addClass("hide"),a(".substitut_form").removeClass("hide").addClass("show")):(a("#id_substitut").prop("required",!1).val(""),a("#id_nicotine").prop("required",!1).val(""),a("#id_type_activity").prop("required",!0),a("#id_activity").prop("required",!0),a(".activity_form").removeClass("hide").addClass("show"),a(".substitut_form").removeClass("show").addClass("hide"))}),displayPaquetsFields(),a("#id_given_field").change(function(){this.checked?(a(".show").removeClass("show").addClass("hide"),a(".showtypes").removeClass("showtypes").addClass("hidetypes")):(a(".hidetypes").removeClass("hidetypes").addClass("showtypes"),displayPaquetsFields())}),a("#id_type_cig_field").on("change",function(e){a(".show").removeClass("show").addClass("hide"),displayPaquetsFields()}),displayAlternativeFields(),a("#id_type_alternative_field").on("change",function(e){a(".show").removeClass("show").addClass("hide"),a("#id_duration_hour").removeClass("hide").addClass("show"),a("#id_duration_min").removeClass("hide").addClass("show"),displayAlternativeFields()}),a("#id_su_field").on("change",function(e){displayAlternativeFields()})}(jQuery);var dateField=document.querySelector(".currentDate"),timeField=document.querySelector(".currentTime"),date=new Date;function displayPaquetsFields(){"IND"==$("#id_type_cig_field").val()?$("#id_ind_pack_field").removeClass("hide").addClass("show"):"ROL"==$("#id_type_cig_field").val()?$("#id_rol_pack_field").removeClass("hide").addClass("show"):"CIGARES"==$("#id_type_cig_field").val()?$("#id_cigares_pack_field").removeClass("hide").addClass("show"):"PIPE"==$("#id_type_cig_field").val()?$("#id_pipe_pack_field").removeClass("hide").addClass("show"):"NB"==$("#id_type_cig_field").val()?$("#id_nb_pack_field").removeClass("hide").addClass("show"):"GR"==$("#id_type_cig_field").val()&&$("#id_gr_pack_field").removeClass("hide").addClass("show")}function displayAlternativeFields(){var e={type_alternative_field:$("#id_type_alternative_field").serialize(),su_field:$("#id_su_field").serialize()};$.ajax({url:"/su_ecig/",type:"GET",data:e}).done(function(e){"true"==jQuery.parseJSON(e).response?($("#id_ecig_vape_or_start").removeClass("hide").addClass("show"),$("#id_ecig_vape_or_start_0").removeClass("hide").addClass("show"),$("#id_ecig_vape_or_start_1").removeClass("hide").addClass("show")):($("#id_ecig_vape_or_start").removeClass("show").addClass("hide"),$("#id_ecig_vape_or_start_0").removeClass("show").addClass("hide"),$("#id_ecig_vape_or_start_1").removeClass("show").addClass("hide"))}),"Sp"==$("#id_type_alternative_field").val()?$("#id_sp_field").removeClass("hide").addClass("show"):"So"==$("#id_type_alternative_field").val()?$("#id_so_field").removeClass("hide").addClass("show"):"Lo"==$("#id_type_alternative_field").val()?$("#id_lo_field").removeClass("hide").addClass("show"):"Su"==$("#id_type_alternative_field").val()&&($("#id_su_field").removeClass("hide").addClass("show"),$("#id_duration_hour").removeClass("show").addClass("hide"),$("#id_duration_min").removeClass("show").addClass("hide"))}function newparameterspackform(){$("#choose_existing_pack").hasClass("active")&&(console.log("choose_existing_pack"),$("#existing_packs").removeClass("hide").addClass("show"),$(".newpackform").removeClass("show").addClass("hide"),$("#id_ref_pack").prop("required",!0),$("#id_type_cig").prop("required",!1),$("#id_brand").prop("required",!1),$("#id_qt_paquet").prop("required",!1),$("#id_price").prop("required",!1)),$("#create_pack_choice").hasClass("active")&&(console.log("create_pack_choice"),$(".newpackform").removeClass("hide").addClass("show"),$("#existing_packs").removeClass("show").addClass("hide"),$("#id_ref_pack").prop("required",!1),$("#id_type_cig").prop("required",!0),$("#id_brand").prop("required",!0),$("#id_qt_paquet").prop("required",!0),$("#id_price").prop("required",!0))}dateField&&(dateField.value=date.getFullYear().toString()+"-"+(date.getMonth()+1).toString().padStart(2,0)+"-"+date.getDate().toString().padStart(2,0)),timeField&&(timeField.value=date.getHours().toString().padStart(2,0)+":"+date.getMinutes().toString().padStart(2,0));